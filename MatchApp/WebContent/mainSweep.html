<!DOCTYPE html>
<html>
<head>
<meta charset="UTF8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="font-awesome-4.3.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/w3c.css">
<link rel="stylesheet" href="css/model.css">
<link rel="stylesheet" href="css/tab.css?1">
<link rel="stylesheet" href="css/my.css">

<script src="scripts/jquery-1.11.1.min.js"></script>
<script src="scripts/jquery.cookie.min.js"></script>
<script src="scripts/jquery.blockUI.js"></script>
<script src="scripts/utility.js?1"></script>
<script src="scripts/sweep.js?1"></script>
<title>Dasao</title>

<script type="text/javascript">
	$(document).ready(function() {
		checkisLogin();
		bindListener();

		//removeImg
		$('body').on('click', 'span.img_remove', function() {
			// do something
			$(this).parent().parent().parent().parent().remove();
			$('#fileField').val('');
		});
	});
</script>

</head>
<body>
	<!-- The Modal -->
	<div id="ImgModal" class="modal">

		<!-- The Close Button -->
		<span class="close">&times;</span>

		<!-- Modal Content (The Image) -->
		<img class="modal-content" id="img01">

		<!-- Modal Caption (Image Text) -->
		<div id="caption"></div>
	</div>
	<!-- Navbar (sit on top) -->
	<div class="w3-top">
		<div class="w3-bar w3-white w3-card" style="letter-spacing: 4px; left: 10px;" id="topBar">
			<a href="" class="w3-bar-item w3-button w3-hover-white">Dasao</a>
			<a class="w3-bar-item"></a>
			<!-- Right-sided navbar links. Hide them on small screens -->

			<div class="w3-right w3-mobile">

				<a href="#mainPage" id="defaultOpen" onclick="Page_change('mainPage', this)"
					class="myPagelink w3-bar-item w3-button w3-hover-white">首頁</a>
				<a href="#post" onclick="Page_change('postPage', this)"
					class="myPagelink w3-bar-item w3-button w3-hover-white">我要找人打掃</a>
				<a href="#list" onclick="Page_change('listPage', this)"
					class="myPagelink w3-bar-item w3-button w3-hover-white">我要幫忙打掃</a>
				<a href="/MatchApp/Login.html" id="a_login" class="w3-bar-item w3-button w3-hover-white">登入</a>
				<div class="w3-dropdown-click w3-round" id="a_loginOK" style="display: none;">
					<button class="w3-button w3-white w3-hover-white w3-round" onclick="menuDropdown()">
						哈囉&nbsp;<span id=span_user_id></span>&ensp;<span class="fa fa-angle-down"></span>
					</button>
					<div class="w3-dropdown-content w3-bar-block w3-border" id="menu_user" style="right: 0">
						<a href="#" class="w3-bar-item w3-button w3-hover-light-gray">基本資料</a>
						<a href="#" class="w3-bar-item w3-button w3-hover-light-gray" onclick="loginOut();">登出</a>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Header -->

	<!-- 	<div class="w3-container w3-center"> -->
	<!-- 		<h1 class="w3-xxlarge">Keep Clearing</h1> -->
	<!-- 	</div> -->
	
	<!-- Page content -->
	<div class="container RWD_marginTop">
		<div class="w3-content myPage w3-padding" id="mainPage">			
			<h1 class="w3-xxlarge w3-margin-left">歡迎使用 Dasao 打掃媒合平台</h1>
			<!-- About Section -->
				<div class="w3-container w3-half" id="mainInfo1">
				  <div class="w3-panel w3-white w3-bottombar border_my_black w3-border w3-round-large">
				    <h2>發佈</h2>
				    <p>點選我要找人打掃,輸入需求後即可發布</p>
				  </div>
				</div>
				<div class="w3-container w3-half" id="mainInfo2">
				  <div class="w3-panel w3-white w3-bottombar border_my_black w3-border w3-round-large">
				    <h2>打掃</h2>
				    <p>點選我要幫忙打掃,即可查看所有訊息</p>
				  </div>
				</div>
				<div class="w3-container" id="mainInfo3">
				  <div class="w3-panel w3-white w3-bottombar border_my_black w3-border w3-round-large">
				    <h2>個人紀錄</h2>
				    <p>您已完成的打掃: 1</p>
				    	<div class="border_my_black w3-border w3-round-large">
				    		<p style="margin-left:6px">2017/01/09 屏東市 整理道路</p>
				    	</div>
				    <p>您正在發布的打掃: 2</p>
				    	<div class="border_my_black w3-border w3-round-large">
				    		<p style="margin-left:6px">2018/01/01 屏東市 住家整理</p>
				    		<p style="margin-left:6px">2018/01/01 屏東市 花園整理</p>
				    	</div>
				    <br/>	
				  </div>
				</div>	
		</div>
		
		<div class="w3-content myPage w3-padding" style="display: none;margin-bottom:16px!important;" id="postPage">				
			<div class="tab_myblack">
				<div class="w3-container my_black w3-center tab_header">
					<h2>找人打掃</h2>
				</div>
				<br />
				<div class="w3-container">
					<div class="w3-row-padding" id="post_content">	
							<div style="margin-bottom:10px;">
								<b>選擇地區</b>
								<select id="select_location" class="w3-select w3-border w3-round-large" name="option" >
								</select>
							</div>
							<div style="margin-bottom:10px;">
								<b>地址</b>&ensp;<span></span>
								<input id="post_location_desc" class="w3-input w3-border w3-round-large" type="text" >
							</div>
							<div style="margin-bottom:10px;">
								<b>說明需求</b>&ensp;<span></span>
								<textarea id="post_demand_desc" class="w3-input w3-border w3-round-large" rows="6"  style="resize: none"></textarea>
							</div>
							<div style="margin-bottom:10px;">
								<b>費用</b>&ensp;<span></span>
								<input id="post_fee" class="w3-input w3-border w3-round-large" type="text">
							</div>
<!-- 							<b>圖片</b>&ensp;<span></span> -->
<!-- 							<div style="margin-bottom:10px;padding-bottom:10px;" class="w3-border w3-round-large"> -->
<!-- 								<input id="fileField" name="files[]" type="file" class="w3-input" onchange='getImg(event);' -->
<!-- 									accept="image/*" placeholder="場地照片?"/> -->
<!-- 								<div id="img_panel" class="w3-row-padding w3-margin-top"></div> -->
<!-- 							</div> -->
					</div>
					<div class="w3-center">
						<button class="w3-btn my_black w3-round-large" id="btn_post" onclick="clickPost(this);">發佈</button>
						&ensp;<span id="post_status" style="color: red;"></span>
					</div>
				</div>
			</div>
		</div>
	
		<div class="w3-content myPage" style="display: none;" id="listPage">
			<div class="w3-row-padding w3-padding-16">
				<div class="w3-half">
					&ensp;<span class="w3-tag w3-xlarge">最</span> <span class="w3-tag w3-xlarge">近</span> <span
					class="w3-tag w3-xlarge">10</span> <span class="w3-tag w3-xlarge">筆</span>
				</div>
				<div class="w3-right">
					<button class="w3-button w3-black w3-round-xxlarge" id="btn_findSearch" onclick="clickSearch(this);">進階查詢</button>
					<button class="w3-button w3-black w3-round-xxlarge" id="btn_findRefresh" onclick="clickFindRefresh(this);">回到第一頁</button>
				</div>	
			</div>		
			<!-- About Section -->
			<ul class="w3-ul w3-card-4 w3-white" id="ul_findPost">
				<li class="w3-bar">
			      <div class="w3-bar-item">
			        <span class="w3-large">找不到資料</span><br>
			        <span></span>
			      </div>
			    </li>
		
			</ul>
			
			<div class="w3-center w3-section">
				<button class="w3-button w3-black w3-round-xxlarge" onclick="clickPre10(this);"><i class="fa fa-angle-left"></i> 上一頁</button>
				<button class="w3-button w3-black w3-round-xxlarge" onclick="clickNext10(this);">下一頁 <i class="fa fa-angle-right"></i></button>
			</div>				
		</div>
	</div>
	<!-- End page content -->
	<!-- Footer -->
	<footer class="w3-center w3-row-padding w3-padding-32 mainfooter">
		
		<div class="w3-third">
			<p class="w3-large">關於 Dasao</p>
			<p>聯絡我們</p>
			<p>聯絡我們</p>
			<p>聯絡我們</p>
		</div>

		<div class="w3-third">
			<p class="w3-large">關於 Dasao</p>
			<p>聯絡我們</p>
			<p>聯絡我們</p>
			<p>聯絡我們</p>
		</div>

		<div class="w3-third">
			<p class="w3-large">關於 Dasao</p>
			<p>聯絡我們</p>
			<p>聯絡我們</p>
			<p>聯絡我們</p>
		</div>
	</footer>
	<script>
		//var ws = new WebSocket('ws://localhost:8443');
		function getUrl() {
			if (!!window.URL) {
				return window.URL;
			}
			if (!!window.webkitURL) {
				return window.webkitURL;
			}
		}

		function showImg(imgId) {
			// Get the modal
			var modal = document.getElementById('ImgModal');

			// Get the image and insert it inside the modal - use its "alt" text as a caption
			var img = document.getElementById(imgId);
			var modalImg = document.getElementById("img01");
			var captionText = document.getElementById("caption");
			img.onclick = function() {
				modal.style.display = "block";
				modalImg.src = this.src;
				captionText.innerHTML = this.alt;
			}

			// Get the <span> element that closes the modal
			var span = document.getElementsByClassName("close")[0];

			// When the user clicks on <span> (x), close the modal
			span.onclick = function() {
				modal.style.display = "none";
			}
		}

		function getImg(evt) {
			var files = evt.target.files;

			for (i = 0; i < files.length; i++) {
				var file = files[i];
				//console.log(file.name);

				var src = URL.createObjectURL(file);

				$('#img_panel').append("<div class='w3-half'>"
							+ "<div class='w3-card'>"
							+ "<a href='" + src +"' target='_blank'>"
							+ "<img src='"
							+ src
							+ "' style='width:100%;height:200px;'></a>"
							+ "<div class='w3-container'>"
							+ "<h5>"
							+ file.name
							+ "<span class='img_remove fa fa-close' style='float:right;'></span></h5>"
							+ "</div></div></div>");

				//showImg(img.id);
			}

			// 	 		ws.send(JSON.stringify({name: file.name,type: file.type}));
			// 	 		ws.send(file);

		};

		function Page_change(PageName, elmnt, color) {
			var i, pagecontent, pagelinks;
			pagecontent = document.getElementsByClassName("myPage");
			for (i = 0; i < pagecontent.length; i++) {
				pagecontent[i].style.display = "none";
			}
			pagelinks = document.getElementsByClassName("myPagelink");
			for (i = 0; i < pagelinks.length; i++) {
				$(pagelinks[i]).removeClass('activeTablink');
			}
			document.getElementById(PageName).style.display = "block";
			$(elmnt).addClass('activeTablink');
			$('html,body').animate({
	            scrollTop: 0
	        }, 100);
			PageInitial(PageName);	
		}
		// Get the element with id="defaultOpen" and click on it
		document.getElementById("defaultOpen").click();
	</script>
</body>
</html>