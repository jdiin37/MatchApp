<!DOCTYPE html>
<html>
<head>
<meta charset="UTF8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="font-awesome-4.3.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/w3c.css">
<link rel="stylesheet" href="css/model.css">
<link rel="stylesheet" href="css/tab.css?1">
<link rel="stylesheet" href="css/my.css">

<script src="scripts/jquery-1.11.1.min.js"></script>
<script src="scripts/jquery.cookie.min.js"></script>
<script src="scripts/jquery.blockUI.js"></script>
<script src="scripts/sweep.js?1"></script>
<title>Clear</title>

<style type="text/css">
html, body {
	font-family: 微軟正黑體, Verdana, sans-serif !important;
}
</style>
<script type="text/javascript">
	$(document).ready(function() {
		checkisLogin();
		bindListener();

		//removeImg
		$('body').on('click', 'span.img_remove', function() {
			// do something
			$(this).parent().parent().parent().parent().remove();
			$('#fileField').val('');
		});
	});
</script>

</head>
<body>
	<!-- The Modal -->
	<div id="ImgModal" class="modal">

		<!-- The Close Button -->
		<span class="close">&times;</span>

		<!-- Modal Content (The Image) -->
		<img class="modal-content" id="img01">

		<!-- Modal Caption (Image Text) -->
		<div id="caption"></div>
	</div>
	<!-- Navbar (sit on top) -->
	<div class="w3-top">
		<div class="w3-bar w3-white w3-padding w3-card" style="letter-spacing: 4px; left: 10px;">
			<a href="" class="w3-bar-item w3-button w3-hover-green">Clear</a>
			<a class="w3-bar-item">找清潔</a>
			<!-- Right-sided navbar links. Hide them on small screens -->

			<div class="w3-right w3-mobile">

				<a href="#mainPage" id="defaultOpen" onclick="Page_change('mainPage', this, '#2196F3')"
					class="myPagelink w3-bar-item w3-button w3-border-right w3-hover-light-blue">首頁</a>
				<a href="#post" onclick="Page_change('postPage', this, '#2196F3')"
					class="myPagelink w3-bar-item w3-button w3-border-right w3-hover-light-blue">我要找人清潔</a>
				<a href="#list" onclick="Page_change('listPage', this, '#2196F3')"
					class="myPagelink w3-bar-item w3-button w3-border-right w3-hover-light-blue">我要幫忙清潔</a>
				<a href="/MatchApp/Login.html" id="a_login" class="w3-bar-item w3-button w3-hover-light-blue">登入</a>
				<div class="w3-dropdown-click" id="a_loginOK" style="display: none;">
					<button class="w3-button w3-white w3-hover-blue" onclick="menuDropdown()">
						哈囉&nbsp;<span id=span_user_id></span>&ensp;<span class="fa fa-angle-down"></span>
					</button>
					<div class="w3-dropdown-content w3-bar-block w3-border" id="menu_user" style="right: 0">
						<a href="#" class="w3-bar-item w3-button w3-hover-blue">基本資料</a>
						<a href="#" class="w3-bar-item w3-button w3-hover-blue" onclick="loginOut();">登出</a>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Header -->

	<!-- 	<div class="w3-container w3-center"> -->
	<!-- 		<h1 class="w3-xxlarge">Keep Clearing</h1> -->
	<!-- 	</div> -->
	<div class="myRWD_height"></div>
	<!-- Page content -->

	<div class="w3-content myPage" style="max-width: 90%; display: none;" id="mainPage">
		<h1 class="w3-xxlarge">Keep Clearing</h1>
		<!-- About Section -->
		<div class="w3-card-4 w3-container w3-padding-64">
			<div class="w3-container w3-red w3-cell w3-mobile">
				<p>Hello W3.CSS Layout.</p>
			</div>
			<div class="w3-container w3-green w3-cell w3-mobile">
				<p>Hello W3.CSS Layout.</p>
			</div>
			<div class="w3-container w3-blue w3-cell w3-mobile">
				<p>Hello W3.CSS Layout.</p>
			</div>
		</div>

		<hr>
	</div>

	<div class="w3-content myPage" style="max-width: 90%; display: none;" id="postPage">
		<h1 class="w3-xxlarge">
			<span class="w3-tag w3-xlarge">P</span> <span class="w3-tag w3-xlarge">O</span> <span
				class="w3-tag w3-xlarge">S</span> <span class="w3-tag w3-xlarge">T</span>
		</h1>
		<!-- About Section -->
		<div class="w3-card-4 w3-container w3-padding-32">
			<div class="w3-row-padding">
				<div class="w3-half">					
					<div class="w3-col" style="width: 40px">
						<i class="w3-xxlarge fa fa-location-arrow w3-text-blue"></i>
					</div>
					<div class="w3-rest">
						<select class="w3-select w3-border" name="option" id="select_location">
						</select>
					</div>
					<div class="w3-row w3-section">
						<div class="w3-col" style="width: 40px">
							<i class="w3-xxlarge fa fa-file-text  w3-text-blue"></i>
						</div>
						<div class="w3-rest">
							<textarea class="w3-input w3-border" rows="6" placeholder="請描述需求" style="resize: none"></textarea>
						</div>
					</div>
					<div class="w3-row w3-section">
						<div class="w3-col" style="width: 40px">
							<i class="w3-xxlarge fa fa-dollar w3-text-blue"></i>
						</div>
						<div class="w3-rest">
							<input class="w3-input w3-border" type="text" placeholder="給多少小費?">
						</div>
					</div>	
				</div>
				<div class="w3-half">
					<div class="w3-border" style="padding-bottom: 16px;">
						<input id="fileField" name="files[]" type="file" class="w3-input" onchange='getImg(event);'
							accept="image/*" placeholder="場地照片?"/>
						<div class="w3-padding-small">場地照片:</div>	
						<div id="img_panel" class="w3-row-padding w3-margin-top"></div>
					</div>
				</div>
			</div>
			<hr/>
			<div class="w3-center">
				<button class="w3-btn w3-blue" id="btn_post" onclick="clickPost();">發佈</button>
				&ensp;<span id="post_status" style="color: red;"></span>
			</div>
		</div>

		<hr>

	</div>

	<div class="w3-content myPage" style="max-width: 90%; display: none;" id="listPage">
		<h1 class="w3-xxlarge">what a list</h1>
		<!-- About Section -->
		<div class="w3-card-4 w3-container w3-padding-64">
			<div class="w3-container w3-red w3-cell w3-mobile">
				<p>Hello W3.CSS Layout.</p>
			</div>
			<div class="w3-container w3-green w3-cell w3-mobile">
				<p>Hello W3.CSS Layout.</p>
			</div>
			<div class="w3-container w3-blue w3-cell w3-mobile">
				<p>Hello W3.CSS Layout.</p>
			</div>
		</div>

		<hr>

	</div>
	<!-- End page content -->
	<!-- Footer -->
	<footer class="w3-center w3-row-padding w3-light-grey w3-padding-32">
		<div class="w3-quarter">
			<p class="w3-large"></p>
			<!-- 			<span class="fa fa-facebook-square fa-3x"></span> -->
			<!-- 			<p>我們是?</p> -->
			<!-- 			<p>服務條款</p> -->
		</div>
		<div class="w3-quarter">
			<p class="w3-large">關於 Clear</p>
			<p>聯絡我們</p>
			<p>我們是?</p>
			<p>服務條款</p>
		</div>

		<div class="w3-quarter">
			<p class="w3-large">我是清潔師</p>
			<p>我們的優勢</p>
			<p>加入我們</p>
			<p>服務條款</p>
		</div>

		<div class="w3-quarter">
			<p class="w3-large">我要找清潔</p>
			<p>聯絡我們</p>
			<p>我們是?</p>
			<p>服務條款</p>
		</div>
	</footer>
	<script>
		//var ws = new WebSocket('ws://localhost:8443');
		function getUrl() {
			if (!!window.URL) {
				return window.URL;
			}
			if (!!window.webkitURL) {
				return window.webkitURL;
			}
		}

		function showImg(imgId) {
			// Get the modal
			var modal = document.getElementById('ImgModal');

			// Get the image and insert it inside the modal - use its "alt" text as a caption
			var img = document.getElementById(imgId);
			var modalImg = document.getElementById("img01");
			var captionText = document.getElementById("caption");
			img.onclick = function() {
				modal.style.display = "block";
				modalImg.src = this.src;
				captionText.innerHTML = this.alt;
			}

			// Get the <span> element that closes the modal
			var span = document.getElementsByClassName("close")[0];

			// When the user clicks on <span> (x), close the modal
			span.onclick = function() {
				modal.style.display = "none";
			}
		}

		function getImg(evt) {
			var files = evt.target.files;

			for (i = 0; i < files.length; i++) {
				var file = files[i];
				//console.log(file.name);

				var src = URL.createObjectURL(file);

				$('#img_panel').append("<div class='w3-half'>"
							+ "<div class='w3-card'>"
							+ "<a href='" + src +"' target='_blank'>"
							+ "<img src='"
							+ src
							+ "' style='width:100%;height:200px;'></a>"
							+ "<div class='w3-container'>"
							+ "<h5>"
							+ file.name
							+ "<span class='img_remove fa fa-close' style='float:right;'></span></h5>"
							+ "</div></div></div>");

				//showImg(img.id);
			}

			// 	 		ws.send(JSON.stringify({name: file.name,type: file.type}));
			// 	 		ws.send(file);

		};

		function Page_change(PageName, elmnt, color) {
			var i, pagecontent, pagelinks;
			pagecontent = document.getElementsByClassName("myPage");
			for (i = 0; i < pagecontent.length; i++) {
				pagecontent[i].style.display = "none";
			}
			pagelinks = document.getElementsByClassName("myPagelink");
			for (i = 0; i < pagelinks.length; i++) {
				pagelinks[i].style.backgroundColor = "";
				pagelinks[i].style.color = "";
				// 				pagelinks[i].className = pagelinks[i].className.replace(
				// 						" w3-border-red", "");
			}
			document.getElementById(PageName).style.display = "block";
			elmnt.style.backgroundColor = color;
			elmnt.style.color = "#fff";
			// 			elmnt.className += " w3-border-red";
			PageInitial(PageName);			
		}
		// Get the element with id="defaultOpen" and click on it
		document.getElementById("defaultOpen").click();
	</script>
</body>
</html>